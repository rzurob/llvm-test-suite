<html><head><title>Constant expression as stop code in STOP statement</title></head><body><table cellspacing="0" cellpadding="5" border="1" bgcolor="#c0e1ff" width="100%">
    <tbody>
        <tr>
            <td align="left" width="100%" valign="top" style="font-size: 12pt; color: rgb(0, 0, 128); font-family: Arial;"><strong>Document Control Information:</strong>
            <p style="color: rgb(0, 0, 0);">The official version of this document is kept in CMVC in the <span style="font-weight: bold; text-decoration: underline;">%CMVC_Family%</span> family, release <span style="font-weight: bold; text-decoration: underline;">%CMVC_Release%</span>, component <span style="font-weight: bold; text-decoration: underline;">%CMVC_Component%</span>, file <span style="font-weight: bold; color: rgb(255, 102, 102); text-decoration: underline;">%CMVC_PathName%</span>. Users of this document are personally responsible for using the official version and for verifying that any copies of the document, in whole or in part, are of the official version. If this document is not a copy of the official version, it is obsolete.<br />
            <br />
            CMVC Extraction Information: %W% %H% %I% sccsid<br />
            <br />
            This document is IBM Confidential.<br />
            </p>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<table cellspacing="0" cellpadding="5" border="1" style="font-size: 12pt; width: 100%; font-family: Arial; background-color: rgb(224, 255, 191); text-align: left;">
    <tbody>
        <tr>
            <td align="left" width="20%" valign="top"><strong>CMVC Feature Number</strong> </td>
            <td align="left" width="80%" valign="top" style="font-weight: bold; color: rgb(0, 0, 255); background-color: rgb(255, 255, 255);">%CMVC_Feature% <br />
            </td>
        </tr>
        <tr>
            <td align="left" valign="top"><strong>Feature Title</strong> </td>
            <td align="left" valign="top" style="font-weight: bold; color: rgb(0, 0, 255); background-color: rgb(255, 255, 255);">%Document_Name%  %Note{By default the feature title and document name are the same. You can either change the document name (through Properties), or replace the tag with the title of the feature}%</td>
        </tr>
        <tr>
            <td align="left" valign="top"><strong>Author(s)</strong> </td>
            <td align="left" valign="top" style="font-weight: bold; color: rgb(0, 0, 255); background-color: rgb(255, 255, 255);">%Authors%</td>
        </tr>
        <tr>
            <td align="left" valign="top"><strong>Applicable Product Releases</strong> </td>
            <td align="left" valign="top" style="font-weight: bold; color: rgb(0, 0, 255); background-color: rgb(255, 255, 255);">%Note{ XL Fortran v14.1 on Linux and AIX.&nbsp;             }%XL Fortran v14.1 on Linux and AIX.</td>
        </tr>
        <tr>
            <td align="left" valign="top"><strong>Affected Components</strong> </td>
            <td align="left" valign="top" style="font-weight: bold; color: rgb(0, 0, 255); background-color: rgb(255, 255, 255);">%Note{ List all compiler components affected by the introduction of or changes to this document. If you believe this document will cause a component to add or change code, then you should list it. Use this list as a starting point and add to it as necessary:<br />
            <br />
            Front Ends: Fortran,<br />
            Documentation: XL Fortran language reference<br />
            Other: Fortran test}%<br />
            Front Ends: Fortran<br />
            Documentation: XL Fortran language reference<br />
            Other: Fortran test</td>
        </tr>
    </tbody>
</table>
<br />
<br />
<table cellspacing="0" cellpadding="5" border="1" bgcolor="#ff6666" width="100%">
    <tbody>
        <tr>
            <td align="center" width="100%" valign="top" style="font-size: 12pt; font-family: Arial; text-align: left;"><strong>Document Status: For Approval</strong> </td>
        </tr>
    </tbody>
</table>
<p><strong>Approvers Only:</strong> Click on the 'Approve' check-box beside your name in the table below if you agree with the technical and user interface content of this document; not checking your 'approve' check-box signifies you do not approve.</p>
<p>%Approvals%</p>
<p>Approval Comments</p>
<p>
<table cellspacing="0" cellpadding="5" border="1" style="font-size: 12pt; width: 100%; font-family: Arial; background-color: rgb(224, 255, 191); text-align: left;">
    <tbody>
        <tr>
            <td align="left" valign="top"><strong>Approvers</strong> (mandatory participation) </td>
            <td align="left" valign="top" style="font-weight: bold; color: rgb(0, 0, 255); background-color: rgb(255, 255, 255);">%Note{Insert the names of people who will have approval authority for this review. These people, in aggregate, are responsible for approving the technical and user interface content of the document. Generally, this list should include people who represent compiler components that will need to change if this review is approved.<br />
            The I0 Process document provides detailed guidance on choosing your list of approvers.<br />
            Use Access Control to add/delete people from this list. The initial access control list is populated with the people from the Component Reviewers section below. You can use Access Control to change their role to Approver, or add additional approvers.}%<br />
            %Approvers%</td>
        </tr>
        <tr>
            <td align="left" valign="top"><strong>Release Management Contact</strong> (optional participation) </td>
            <td align="left" valign="top" style="font-weight: bold; color: rgb(0, 0, 255); background-color: rgb(255, 255, 255);">%Release_Management_Contact% <br />
            %Note{Release Manager/Development Manager/Team Lead,<br />
            usually your team's representative at product status meetings. Use Access Control to add/change Release Management Contact.}%<br />
            </td>
        </tr>
        <tr>
            <td align="left" valign="top"><strong>Component Reviewers</strong> (optional participation) </td>
            <td align="left" valign="top" style="color: rgb(0, 0, 255); background-color: rgb(255, 255, 255);">%Note{These groups must be made aware of the I0. Assign at least one person representing each group. The names listed below are suggested contacts only, please assign whoever is appropriate:<br />
            <ul style="font-family: Arial;">
                <li><strong>C FE and related tools/libraries/driver:</strong><br />
                AIX - Philip Luk<br />
                Linux - Philip Luk<br />
                z/OS - Kendrick Wong<br />
                CELL - Larry Lindsay<br />
                UPC - Philip Luk</li>
                <li><strong>C++ FE and related tools/libraries/driver:</strong><br />
                AIX - Jeff Heath<br />
                Linux - Sasha Kasapinovic<br />
                z/OS - Michael Wong<br />
                CELL - Kevin Shin<br />
                </li>
                <li><strong>Fortran FE, ASTI, PLIX, and related tools/libraries/driver:</strong><br />
                AIX, PLIX - Rafik Zurob<br />
                Linux - Xing Xue<br />
                BG/L - Daniel Chen<br />
                CELL - Kelvin Li </li>
                <li><strong>PL/X Development:</strong><br />
                Kirk Crane<br />
                </li>
                <li><strong>TPO and associated tools/libraries (libxlopt, SMPRT, MASS):</strong><br />
                AIX - Arie Tal/Yan Zhang<br />
                Linux - Tommy Wong<br />
                z/OS - Chris Miclea<br />
                BG - Damien Bonaventure<br />
                CELL - Amy Wang</li>
                <li><strong>TOBEY and associated tools/libraries: (dis, libxl, bolt)</strong><br />
                AIX - Christopher Lapkowski<br />
                Linux - Irina rada<br />
                z/OS - Chwan-Hang Lee<br />
                BG - Damien Bonaventure, Leon Ding (Xialoliang Ding/Piscataway/IBM@IBMUS)<br />
                CELL - Dickson Chau<br />
                dis - Ian McIntosh<br />
                </li>
                <li><strong>WCode:</strong><br />
                Roland Froese</li>
                <li><strong>Disassembler<br />
                </strong>Ian McIntosh</li>
                <li><strong>Information Development:</strong><br />
                C/C++ - Wei Zhong Shan/China/IBM<br />
                Fortran - Lisa Wilkinson<br />
                </li>
                <li><strong>Customer Service and Support:</strong><br />
                AIX/Linux - Zoran Kulina<br />
                z/OS - Youssef Himo <br />
                Cell - Sean Kennedy </li>
                <li><strong>Compiler Enablement:</strong><br />
                Dwayne Moore </li>
                <li><strong>Fortran Test:</strong><br />
                Kobi Vinayagamoorthy<br />
                </li>
                <li><strong>C/C++ Test:</strong><br />
                Thomas Lee(z/OS)<br />
                Adrean Gatea (system p)<br />
                </li>
                <li><strong>PL/X Test:</strong><br />
                Anne Wylie </li>
                <li><strong>Build and Packaging Team:</strong><br />
                AIX - Chris Taylor<br />
                Linux - Viktor Ganich<br />
                BG - Steven Chen<br />
                Cell - Kevin Yuen<br />
                z/OS - Steve Chen<br />
                Dale Soldiuk (Please include Dale as optional on all reviews)</li>
                <li><strong>Performance Measurement and Analysis Team:<br />
                </strong>John Tam</li>
                <li><strong>Planning</strong><br />
                Mary Chan<br />
                </li>
            </ul>
            <p>The following groups must be notified of a W-Code change or if a change affects their language. They are optional otherwise.</p>
            <ul>
                <li><strong>PL/I:</strong><br />
                zOS and AIX - Peter Elderon (in SVL) </li>
                <li><strong>Cobol:</strong><br />
                AIX - Richard Nelson (in SVL) </li>
            </ul>
            <p>The following group must be notified of a front-end (C FE, or C++ FE) related change or other modification having a direct impact. Inclusion is optional otherwise.</p>
            <ul>
                <li><strong>Makedepend for USS:</strong><br />
                Christopher Taylor </li>
            </ul>
            <p>The following group must be notified whenever a change in debug WCODE is made, and any debugger related issues are involved.</p>
            <ul>
                <li><strong>Common Debug Architecture Development (CDA):</strong><br />
                Kendrick Wong </li>
            </ul>
            Use Access Control to add/delete people from this list.}%             <br />
            %Component_Reviewers%</td>
        </tr>
        <tr>
            <td align="left" valign="top"><strong>Team Reviewers</strong> (optional participation) </td>
            <td align="left" valign="top" style="font-weight: bold; color: rgb(0, 0, 255); background-color: rgb(255, 255, 255);">             %Note{List any additional people you feel need to participate in the review. These people do not have approval authority. Use Access Control to add/delete people from this list.}%<br />
            %Team_Reviewers%</td>
        </tr>
    </tbody>
</table>
</p>
<p><br />
<br />
</p>
<p>
<table cellspacing="2" cellpadding="2" border="1" style="font-size: 12pt; width: 100%; font-family: Arial; background-color: rgb(224, 255, 191); text-align: left;">
    <tbody>
        <tr>
            <td style="vertical-align: top; font-family: Arial;"><strong>Reviewers</strong>: Please click the 'Reviewed' checkbox beside your name to indicate your participation in the review. </td>
        </tr>
    </tbody>
</table>
</p>
<p>%Reviews%<br />
</p>
<p>
<table cellspacing="2" cellpadding="2" border="1" style="font-size: 12pt; width: 100%; font-family: Arial; background-color: rgb(224, 255, 191); text-align: left;">
    <tbody>
        <tr>
            <td style="vertical-align: top; font-family: Arial;"><strong>Access Change History</strong> %Note{Authors: Access Change History will list any changes to the access control done to the document draft. These changes would not be visible in a review. In a review, this section would only list the access changes done to the review itself.<br />
            Please note that changes to the access control of a review are not automatically reflected in the access control of the draft document.}% </td>
        </tr>
    </tbody>
</table>
</p>
<p>%CollapsedSection{<strong>Access Change History</strong>}{%Access_Change_History%}%<br />
</p>
<p>
<table cellspacing="0" cellpadding="5" border="1" bgcolor="#bfbfff" width="100%">
    <tbody>
        <tr>
            <td align="center" width="100%" valign="top" style="font-size: 12pt; font-family: Arial;"><strong>Feature Overview</strong> </td>
        </tr>
    </tbody>
</table>
</p>
<p>%Note{ General description of the feature. The contents of this section are intended to guide reviewers as to what they will be reviewing. Any information relevant to an external product user must appear in the User Documentation section; that content must not only appear here.<br />
</p>
<p> The rest of this section outlines the key issues and design decisions that should be noted by the reviewers. The purpose of these subsections is to give reviewers a 'birds-eye' view of the design, to see if any key requirements or issues were missed or design decisions made that need to call out special attention. This is also a good vehicle for identifying whether anyone should be added as a reviewer for the design}%</p>
<p>In Fortran 2003 and earlier standards, STOP statement only supported a sequence of digits or a scalar character constant as a stop code. Fortran 2008 allows a constant expression of integer or character type as a stop code.<br />
</p>
<h2>Key Requirements</h2>
%Note{In this subsection, describe what are the key requirements from this design. Such requirements could be user interface impact (i.e. what is visible to the users), to interaction with external tools, such as profilers, debuggers,&nbsp; and requirements such as standard compatibility, etc.}%<br />
<br />
The extension to the STOP statement is required to comply with the Fortran 2008 standard.<br />
<h2>Key Design Issues</h2>
%Note{In this subsection, describe what are the key design issues that have been discovered by the authors while researching the design. For example, how to maintain backward binary compatibility, compatibility with listing files, additional work that is required for supporting other platforms such as z/OS, BlueGene, Cell, etc. }%<br />
None.<br />
<h2>Key Design Decisions</h2>
%Note{In this subsection, describe what were the decisions made by the authors that deal with the issues raised in the previous section. }%<br />
No change is needed to the existing mechanism for processing stop code in both non-CAF and CAF mode. Further details can be found in the &quot;Key Design Decision&quot; section of the I0 document for ERROR STOP statement. <br />
<h2>Testing Strategy</h2>
%Note{In this subsection, describe what is the testing approach chosen by the authors for the feature. This should be limited to a high level description of the strategy, leaving the more detailed description to the &quot;Testing Considerations&quot; section that follows in the design. }%<br />
<br />
1. Test in non-CAF mode.<br />
2. Test in CAF-mode with multiple images.
<p> </p>
<table cellspacing="0" cellpadding="5" border="1" bgcolor="#bfbfff" width="100%">
    <tbody>
        <tr>
            <td align="center" width="100%" valign="top" style="font-size: 12pt; font-family: Arial;"><strong>User Documentation</strong> </td>
        </tr>
    </tbody>
</table>
<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Overview</h3>
</strong>
<p>%Note{  Describe in general terms what a user will see or can do with this feature. Do not include compiler-internal technical details, this entire section should only include user-visible information. Specific implementation details should be covered in the sections following. <br />
<br />
For example, &quot;The new -qcook and -qbroil options give the user control of the compiler's culinary capabilities.&quot;}%</p>
<p>Execution of STOP statement initiates normal termination of a program. In F2008, the STOP statement can take a constant expression of integer or character type as stop code.<br />
</p>
<strong style="font-size: 20px; color: rgb(0, 128, 0);"> </strong>  <strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3><strong style="font-size: 20px; color: rgb(0, 128, 0);"> </strong> </h3>
</strong><strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>User Benefits</h3>
</strong>
<p> %Note{Describe why a user would want or need to use this feature. Include any relevant information to help guide the Information Development team presenting this feature to customers. For example, &quot;Using option -qXXXX will usually speed up programs that contain nested loops when combined with the -qpdf option.&quot;  Another example, &quot;The __XXXX attribute is compatible with the like-named gcc attribute and allows you to compile code written for the gcc compiler.&quot;}%</p>
<p>The feature will provide more flexibility in specifying stop codes in STOP statements.<br />
</p>
<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Public Interface</h3>
</strong>
<p>%Note{;Describe source interfaces, options, listings, etc. - how the user would use this. For multi-language I0s, remember to provide syntax etc. for all languages involved.  Also, remember that option syntax may vary between platforms, especially between zSeries and pSeries compilers.</p>
<p> If you are adding an option that  has an equivalent gcc/g++ option, you need to review the designs/i0/gxlcOptionMapping/gxlcOptionMapping_I0.html I0, to determine if that I0 will require updating.</p>
<p> If you are defining a feature that requires the generation of file names, refer to the Reference Information section of this document below for help on how to specify the rules for file naming.}%</p>
<p><font face="Verdana">STOP syntax:</font><!-- featureflow:comments:_87 --><!-- featureflow:newcomments:_87 --> </p>
<div><!-- featureflow:line:_88 -->
<pre><font face="Verdana">    <font face="Courier New">&gt;&gt; ------- STOP -----------------------------------------------------------------------------&lt;&lt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</font></font><font face="Courier New"><br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |---------- scalar_char_constant_expr  ---------|<font face="Courier New"><br /></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |---------- scalar_int_constant_expr&nbsp;&nbsp; ---------|</pre>
</div>
<font face="Courier New"></font> <strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Constraints</h3>
</strong>
<p>%Note{Describe conditions that must be met and can be validated by the compiler - e.g. &quot;The BLAH directive cannot be used outside of a DO loop.&quot; Violation of a constraint usually results in an error message.}%</p>
<p>The scalar_int_constant_expr must be a scalar integer constant expression.<!-- featureflow:comments:_101 --><!-- featureflow:newcomments:_101 --><br />
<font face="Arial"><!-- featureflow:line:_102 -->The<!-- featureflow:comments:_102 --><!-- featureflow:newcomments:_102 --></font> <font face="Verdana"><font face="Arial"><!-- featureflow:line:_103 -->scalar_char_constant_expr must be a scalar character constant expression.<!-- featureflow:comments:_103 --><!-- featureflow:newcomments:_103 --></font><br />
</font> </p>
<div><!-- featureflow:line:_104 --></div>
<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Rules</h3>
</strong>
<p>%Note{Describe conditions that must be met but cannot be validated by the compiler - e.g. &quot;The BLAH option may not be used with programs that call Fortran subroutines from C.&quot; Generally, violation of a rule does not (but might) result in an error message.}%</p>
<p>None.<br />
</p>
<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Language Standard Considerations</h3>
</strong>
<p>%Note{If relevant, what language standard(s) does this apply to or should it be labeled in the documentation as an IBM language extension? Is there a -qlanglvl impact in the compiler and/or runtime?}% <br />
</p>
<p>Usage of a stop code that is neither a digit string nor a character literal, is an F2008 feature. <!-- featureflow:line:_110 -->Language level messages will be emitted if such a stop code is present in a STOP statement when the -qlanglvl option specifies Fortran 2003 or an older standard.</p>
<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Messages</h3>
</strong>
<p>%Note{ Either insert new message text or a description of the kinds of messages required. Include a description of which components will need to issue them (e.g. driver, FE, BE, runtime...). </p>
Tips for writing message text:
<ul>
    <li>Use short, simple sentences. Avoid sentence fragments and do not omit articles (a, an, the, etc.). </li>
    <li>Include only essential information. </li>
    <li>Avoid wording that seems to blame the user. </li>
    <li>Use system-supplied substitution variables where appropriate to provide the user with useful information. </li>
</ul>
<p>For XL Fortran, messages must be reviewed by the XL Fortran message review committee and will generally be finalized in the I1, not the I0. Contact Dave Paulmark or Richard Salyniuk to get a message reviewed. </p>
<p>For messages that will be emitted on zOS, remember to include the following so that the detailed message documentation will be accurate: </p>
<ul>
    <li><strong>Message Number</strong> (if known) </li>
    <li><strong>Raw Message</strong> including substitution text markers. </li>
    <li><strong>Where</strong> information explaining what each substitition text marker represents. </li>
    <li><strong>Explanation</strong> text detailing the message contents and what it means. Use the explanation to expand the message text and provide more detail. Describe the cause of the message (when and where the error occurred) and the consequences of the error. The explanation might also include a system action that occurs as part of the error. </li>
    <li><strong>User Response</strong> text explaining what the user should do to recover from the error. Specify the exact steps that would allow the user to continue working, to correct the error, or to prevent the problem. Write in an active voice and use the imperative (command) mood. When the user can choose between different options, present the options in an unordered list. When the user must follow a specific sequence of steps, present the information in an ordered list. Provide precise information, such as exact names of directories etc. If the user does not need to do anything in response to the message, use the phrase &quot;No response required.&quot; <br />
    </li>
</ul>
}%<br />
<br />
A new language level message is needed and will be approved by the xlf message review committee.<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Performance Considerations</h3>
</strong>
<p>%Note{Describe any performance impacts (good or bad) that we can tell users about. Consider both compile time and runtime performance. For example, &quot;Using this option will slow down the compiler at higher optimization levels but can result in improved execution speed for programs with deeply nested loop constructs.&quot; If the feature has minimal impact on compile time and execution time, mark this section as &quot;n/a&quot;. }%</p>
<p>None.<br />
</p>
<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Multi-Platform/Portability Considerations</h3>
</strong>
<p>%Note{What compiler products will be affected by this? Consider both operating systems (AIX, zOS, Linux, iOS...) and hardware (pSeries, zSeries, iSeries, xSeries...)  For example, &quot;This feature takes advantage of AIX-specific capabilities and is not portable to our other non-AIX products.&quot;  Also, &quot;The intrinsics in this feature work on all supported Linux systems but some will not function correctly on older AIX platforms such as POWER2.&quot; </p>
<p> Consider also portability issues such as gcc or competitive compiler product affinity.  For example, &quot;This language extension is compatible with the similar extension defined by many Cray and VAX Fortran compilers.&quot;}%</p>
<p>None.<br />
</p>
<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Migration/Co-Existence/Binary-Compatibility Considerations</h3>
</strong>
<p>%Note{Describe anything relevant. Consider things like linking old code to new code, using old module files, reading data files written by code built with older compilers... Consider impact to existing make files. Consider anything that changes the meaning of a pre-existing option or construct.}%</p>
<p>None.<br />
</p>
<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Debug Considerations</h3>
</strong>
<p>%Note{How are debuggers affected by this? Is existing debug format on all relevant targets sufficient? Do debuggers need new capabilities to understand this?  Will there be known limitations with specific debuggers?  Will the debugger function better/worse at higher optimization levels?}%</p>
<p>None.<br />
<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>NLS (Unicode) Considerations</h3>
</strong></p>
<p>%Note{Note anything relevant here to national language support.}%</p>
<p>None.<br />
</p>
<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Samples</h3>
</strong>
<p>%Note{Where relevant, provide both valid examples and invalid examples of using the new feature.}%</p>
<p>  </p>
<pre><font face="Courier New">INTEGER :: MATRIX(10,10)</font><font face="Courier New"><br /></font><font face="Courier New">INTEGER :: OP<br />INTEGER :: RESULT_MATRIX(10,10)</font><font face="Courier New"> <br /></font><font face="Courier New">INTEGER, PARAMETER :: INIT_ERROR = 10<br />INTEGER, PARAMETER :: PROCESS = 20<br /><br /></font>MATRIX = 10<br />RESULT_MATRIX = 10</pre>
<font face="Courier New"><br />
IF (ANY(RESULT_MATRIX .NE. 10)) STOP INIT_ERROR + 1</font>
<p> </p>
<p> </p>
<p> </p>
<pre><font face="Courier New">! In case there is any initialization error,<br /></font><font face="Courier New">! message on stderr: STOP 11<br />! return code non-CAF: 11<br />! return code CAF: 0</font></pre>
<p> </p>
<pre><font face="Courier New">IF (ANY(MATRIX .NE. 10)) STOP INIT_ERROR + 2</font></pre>
<pre><font face="Courier New"><font face="Courier New">! In case there is any initialization error,<br /></font><font face="Courier New">! message on stderr: STOP 12<br />! return code non-CAF: 12<br />! return code CAF: 0</font></font></pre>
<pre><font face="Courier New"><font face="Courier New"> OP = WHICH_OP()</font></font></pre>
<pre><font face="Courier New"><font face="Courier New"> IF (OP .EQ. 1) THEN<br />&nbsp;&nbsp; RESULT_MATRIX = RESULT_MATRIX + MATRIX<br />&nbsp;&nbsp; STOP PROCESS + 1<br />&nbsp;&nbsp; <font face="Courier New">! message on stderr: STOP 21</font><br />&nbsp;&nbsp; <font face="Courier New">! return code non-CAF: 21</font><br />&nbsp;&nbsp; <font face="Courier New">! return code CAF: 0</font></font></font></pre>
<pre><font face="Courier New"><font face="Courier New"> <font face="Courier New"> ELSE IF (OP .EQ. 2) THEN<br />&nbsp;&nbsp; RESULT_MATRIX = RESULT_MATRIX - MATRIX<br />&nbsp;&nbsp; STOP PROCESS + 2<br />&nbsp;&nbsp; <font face="Courier New">! message on stderr: STOP 22</font><br />&nbsp;&nbsp; <font face="Courier New">! return code non-CAF: 22</font><br />&nbsp;&nbsp; <font face="Courier New">! return code CAF: 0</font></font></font></font></pre>
<pre><font face="Courier New"><font face="Courier New"><font face="Courier New"> ELSE<br />&nbsp;&nbsp; STOP PROCESS + 3<br />&nbsp;&nbsp; <font face="Courier New">! message on stderr: STOP 23</font><br />&nbsp;&nbsp; <font face="Courier New">! return code non-CAF: 23</font><br />&nbsp;&nbsp; <font face="Courier New">! return code CAF: 0</font></font></font></font></pre>
<pre><font face="Courier New"><font face="Courier New"><font face="Courier New"> END IF</font></font></font></pre>
<pre><font face="Courier New"><font face="Courier New"><font face="Courier New"> END</font></font></font></pre>
<p><font face="Courier New"><font face="Courier New"><font face="Courier New"> </font><br />
</font></font></p>
<br />
<table cellspacing="0" cellpadding="5" border="1" bgcolor="#bfbfff" width="100%">
    <tbody>
        <tr>
            <td align="center" width="100%" valign="top" style="font-size: 12pt; font-family: Arial;"><strong>Architecture Review Board</strong> </td>
        </tr>
    </tbody>
</table>
<strong style="font-size: 20px; color: rgb(0, 128, 0);">  </strong>
<p><font face="Verdana">%Note{ Describe whether a review before the Architecture Review Board is required.&nbsp; Should a review be conducted, the results should be pasted here.&nbsp; Otherwise, please place a comment here explaining why no review is required.}%</font></p>
<p><font face="Verdana">No architecture review is required.<br />
</font></p>
<table cellspacing="0" cellpadding="5" border="1" bgcolor="#bfbfff" width="100%">
    <tbody>
        <tr>
            <td align="center" width="100%" valign="top" style="font-size: 12pt; font-family: Arial;"><font face="Verdana"><strong>Internal Compiler Team Information</strong></font> </td>
        </tr>
    </tbody>
</table>
<font face="Verdana"><strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Product Dependencies</h3>
</strong> </font>
<p><font face="Verdana">%Note{ Identify dependencies within the product for this feature. Does this feature rely on the completion of another feature or does it need to finish before others can begin? Does a W-Code ACR need to be approved? Where possible, use master feature numbers to pinpoint the precise work items. }%</font></p>
<p><font face="Verdana">None.<br />
</font></p>
<font face="Verdana"><strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Patent/Disclosure Implications</h3>
</strong> </font>
<p><font face="Verdana">%Note{ Identify if this feature or any related work should/will result in a patent application or technical disclosure. }%</font></p>
<p><font face="Verdana">None.<br />
</font></p>
<p><font face="Verdana"><strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Scientific Research and Experimental Development</h3>
</strong> </font></p>
<p><font face="Verdana"><strong>Technological Advancements</strong>: %Note{State the technological  objective of the feature. Describe the advancements in knowledge gained  through the experimentation performed.}%</font></p>
<p><font face="Verdana"><strong>Technological Obstacles</strong>: %Note{List the limitations of the  current state of technology. Outline the technological uncertainty in  development and the systematic investigation performed. Focus on the  obstacles that must be overcome and not on the difficulty of the  feature.}%</font></p>
<p><font face="Verdana"><strong>Work Performed</strong>: %Note{Describe the development of prototypes  and final implementations, including dates. Make sure to include failed  prototypes. Describe findings from any experimentation.}%</font></p>
<p><font face="Verdana">None.<br />
</font></p>
<font face="Verdana"><strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Build and Packaging Considerations</h3>
</strong>%Note{Note anything here that needs to be done to alter build or  packaging.  In particular, note new or deleted packaged files.}%<br />
None.<strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Information Development Impacts</h3>
</strong> </font>
<p><font face="Verdana"> %Note{List any documentation impacts. What books/chapters/sections are affected?  Do the man pages need updating? Are there any new terms or phrases that need to be added to the glossary?}% <br />
</font></p>
<p><font face="Verdana">In the STOP statement section, the syntax should be updated to the following.</font></p>
<pre><font face="Courier New"><font face="Courier New"><font face="Courier New">&gt;&gt; ------- STOP ------------------------------------------------------------------------------&lt;&lt;</font><font face="Courier New"><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |------------ scalar_char_constant_expr  --------------|<br /></font><!-- featureflow:comments:_90 --><!-- featureflow:newcomments:_90 --></font></font><font face="Courier New"><font face="Courier New"><font face="Courier New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |------------ scalar_int_constant_expr&nbsp;&nbsp; --------------|</font></font></font></pre>
<div><!-- featureflow:comments:_89 --><!-- featureflow:newcomments:_89 --></div>
<div><!-- featureflow:line:_90 --></div>
<font face="Courier New"><font face="Courier New"> </font></font>
<p><font face="Courier New"><font face="Courier New">&nbsp;</font></font></p>
<p><font face="Verdana">In addition, the section should also specify the behavior of the STOP statement and the process exit status in the presence of multiple images and POE runtime.<br />
</font></p>
<font face="Verdana"><strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Testing Considerations</h3>
</strong> </font>
<p><font face="Verdana">%Note{List any information here that would assist the test teams.}%&nbsp;</font></p>
<p><font face="Verdana">1. Verify compiler behavior on STOP statements having constant expressions as stop codes.</font></p>
<blockquote>
<p><font face="Verdana">(a) Language standard: no restriction.<br />
</font></p>
<p><font face="Verdana"> (b) Language standard: restricted to 2003 or older.</font></p>
</blockquote>
<p><font face="Verdana">2. Verify behavior of STOP statement in non-CAF mode.</font></p>
<p><font face="Courier New"><font face="Courier New"><font face="Verdana">3. Verify behavior of STOP statement in CAF mode with various number of images.</font><br />
</font></font></p>
<p><font face="Courier New"><font face="Courier New"><br />
</font></font></p>
<table cellspacing="0" cellpadding="5" border="1" bgcolor="#bfbfff" width="100%">
    <tbody>
        <tr>
            <td align="center" width="100%" valign="top" style="font-size: 12pt; font-family: Arial;"><strong>High-Level Implementation Design</strong> </td>
        </tr>
    </tbody>
</table>
<font face="Verdana"><strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Implementation Design Overview</h3>
</strong> </font>
<p><font face="Verdana">%Note{The remainder of this document should not be used or needed to develop end-user documentation.}% </font></p>
<p><font face="Verdana">%Note{Describe, in general high-level terms, how the compiler will implement this. For example, &quot;The front end will parse a new option and set a W-Code bit which TOBEY will read...&quot;  }%</font></p>
<p><font face="Courier New"><font face="Courier New"><font face="Courier New">R855 stop-stmt is STOP [ stop-code ]</font></font></font></p>
<p><font face="Courier New"><font face="Courier New"><font face="Courier New">R857 stop-code is scalar-default-char-constant-expr<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; or scalar-int-constant-expr</font></font></font></p>
<p><font face="Courier New"><font face="Courier New"><font face="Courier New">C850 (R857) The scalar-int-constant-expr shall be of default kind.</font></font></font></p>
<p><font face="Verdana"><strong>Changes to internal production rule</strong></font></p>
<p><font face="Verdana">The production rules for STOP statement will be changed to the following:</font></p>
<pre><font face="Courier New"><font face="Courier New"><font face="Courier New"><!-- featureflow:comments:_218 --><!-- featureflow:newcomments:_218 --> &lt;stop stmt&gt; ::= STOP<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; | STOP &lt;stop code&gt;<!-- featureflow:comments:_219 --><!-- featureflow:newcomments:_219 --><br />&nbsp;&lt;stop code&gt; ::=&nbsp;expr&gt;</font></font></font></pre>
<p><font face="Verdana">The following existing production rules will be removed.</font></p>
<pre><font face="Courier New"><font face="Courier New"><font face="Courier New">&nbsp;&lt;stop stmt&gt; ::= STOP &lt;int const&gt;  </font><font face="Courier New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | STOP &lt;str const&gt;  </font><font face="Courier New">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | STOP &lt;identifier&gt;</font><br /> </font></font></pre>
<p><font face="Verdana">The processing of STOP &lt;stop code&gt; will check for language standard in effect and will ensure validity of the &lt;stop code&gt; accordingly.<br />
</font></p>
<font face="Verdana"><strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Inter-Component Communication/Interfaces</h3>
</strong> </font>
<p><font face="Verdana"> %Note{List the requirements or assumptions placed on all affected components.  Describe how components (e.g. FE, ASTI, TPO, TOBEY, driver, runtime...) will communicate where that is necessary. Are new W-Code interfaces required? Will the driver need to recognize a new return code?}% <br />
</font></p>
<p><font face="Verdana">No change is needed in the existing interface between front-end and runtime. Front-end will call the runtime routine &quot;_xlfStopFPSCR&quot; for generating system return code and the messages (if applicable) to display on standard error.<br />
</font></p>
<font face="Verdana"><strong style="font-size: 20px; color: rgb(0, 128, 0);">
<h3>Other Implementation Design Information</h3>
</strong> </font>
<p><font face="Verdana">%Note{Note anything here relevant to the review of the high-level implementation design that would be useful to reviewers that doesn't fit into any other section.  For example, &quot;The C front end will protect this code under the AIX_ONLY macro.&quot;  Another example, &quot;TOBEY will implement this using the ldxrwa PWR9 instruction, see the reference in the Appendix for details.&quot;}%</font></p>
<p><font face="Courier New"><font face="Courier New"><font face="Verdana">None.</font><br />
</font></font></p>
<table cellspacing="0" cellpadding="5" border="1" bgcolor="#bfbfff" width="100%">
    <tbody>
        <tr>
            <td align="center" width="100%" valign="top" style="font-size: 12pt; font-family: Arial;"><strong>Appendix/References</strong> </td>
        </tr>
    </tbody>
</table>
<p><font face="Verdana"><br />
%Note{This section provides additional information to be used when writing the I0.  This is not intended for inclusion in the I0 so this section should be removed from the I0 once it is written. </font></p>
<h4><font face="Verdana">Rules for file name generation on Z/OS</font></h4>
<p><font face="Verdana"> </font></p>
<ol> <font face="Verdana">
    <li>There are 4 types of invocation: JCL, TSO, c89 utility and xlc utility</li>
    <li>JCL invocation is processed separate from all other invocation types. A default destination name is generated based on the source file name. Output file names are then generated based on this default destination name. For example:
    <ul>
        <li>If I compile a source file //'TSCTEST.PDS.C(FOO)' the generated name of the DBRM file would be //'MILOS.PDS.C.DBRM(FOO)'</li>
        <li>If I compile a source file //'TSCTEST.SEQ.C' the generated name of the DBRM file would be //'MILOS.SEQ.C.DBRM'</li>
        <li>If I compile a source file /home/milos/foo.c the generated DBRM file would be ./foo.dbrm</li>
    </ul>
    </li>
    <li>TSO invocation relies on REXX execs which specify a default destination pattern &quot;//~.DEST&quot;. The default destination pattern is passed to the compiler as an argument. This pattern causes the compiler to generate output file names using the same logic as in the JCL case.</li>
    <li>The xlc utility always generates a default destination name based on the source file name (this can not be changed by the user). The default destination name is passed to the compiler as an argument. The compiler uses the default destination name to generate output file names in a similar fashion as in the JCL case, but with slightly different results. For example:
    <ul>
        <li>If I compile a source file //'TSCTEST.PDS.C(FOO)' the generated name of the DBRM file would be //'MILOS.PDS.DBRM(FOO)'</li>
        <li>If I compile a source file //'TSCTEST.SEQ.C' the generated name of the DBRM file would be //'MILOS.SEQ.DBRM'</li>
        <li>If I compile a z/OS UNIX file /home/milos/foo.c the generated DBRM file would be ./foo.dbrm </li>
    </ul>
    </li>
    <li>Like xlc, the c89 utility always generates a default destination name based on the source file name. By default the behavior is the same as in the xlc case. However, this can be changed by setting _OSUFFIX_HOSTQUAL  and _OSUFFIX_HOSTRULE to 0 which yields the same behavior as in the JCL case.}%</li>
    </font></ol>
    <p><font face="Verdana">1. Fortran 2008 WD 1539-1, Section 8.4 -- STOP and ERROR STOP statements of the Fortran 2008 Standard. <br />
    </font></p>
    <p><font face="Verdana">2. I0 document for &quot;CAF: ERROR STOP statement&quot;, CMVC feature 351605.31, family &quot;aix&quot;, release &quot;des.dev&quot;, component &quot;design.i0&quot;, file &quot;designs/i0/caf__error_stop_statement/caf__error_stop_statement.html&quot;.<br />
    </font></p><!--HTML Wrapper--></body></html>