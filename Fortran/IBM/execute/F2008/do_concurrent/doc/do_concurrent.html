<html><head><title>F2008: DO CONCURRENT</title></head><body><table width="100%" bgcolor="#c0e1ff" cellspacing="0" cellpadding="5" border="1">
    <tbody>
        <tr>
            <td width="100%" valign="top" align="left" style="font-family: Arial; color: rgb(0, 0, 128); font-size: 12pt;"><strong>Document Control Information:</strong>
            <p style="color: rgb(0, 0, 0);">The official version of this document is kept in CMVC in the <span style="font-weight: bold; text-decoration: underline;">%CMVC_Family%</span> family, release <span style="font-weight: bold; text-decoration: underline;">%CMVC_Release%</span>, component <span style="font-weight: bold; text-decoration: underline;">%CMVC_Component%</span>, file <span style="color: rgb(255, 102, 102); font-weight: bold; text-decoration: underline;">%CMVC_PathName%</span>. Users of this document are personally responsible for using the official version and for verifying that any copies of the document, in whole or in part, are of the official version. If this document is not a copy of the official version, it is obsolete.<br />
            <br />
            CMVC Extraction Information: %W% %H% %I% sccsid<br />
            <br />
            This document is IBM Confidential.<br />
            </p>
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<table cellspacing="0" cellpadding="5" border="1" style="text-align: left; background-color: rgb(224, 255, 191); width: 100%; font-family: Arial; font-size: 12pt;">
    <tbody>
        <tr>
            <td width="20%" valign="top" align="left"><strong>CMVC Feature Number</strong> </td>
            <td width="80%" valign="top" align="left" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-weight: bold;">%CMVC_Feature%</td>
        </tr>
        <tr>
            <td valign="top" align="left"><strong>Feature Title</strong> </td>
            <td valign="top" align="left" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-weight: bold;">%Document_Name% %Note{By default the feature title and document name are the same. You can either change the document name (through Properties), or replace the tag with the title of the feature}%</td>
        </tr>
        <tr>
            <td valign="top" align="left"><strong>Author(s)</strong> </td>
            <td valign="top" align="left" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-weight: bold;">%Authors%</td>
        </tr>
        <tr>
            <td valign="top" align="left"><strong>Applicable Product Releases</strong>       </td>
            <td valign="top" align="left" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-weight: bold;">XL FORTRAN 15.1.3</td>
        </tr>
        <tr>
            <td valign="top" align="left"><strong>Affected Components</strong>       </td>
            <td valign="top" align="left" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-weight: bold;">Front Ends: Fortran<br />
            Documentation: Product documentation<br />
            </td>
        </tr>
    </tbody>
</table>
<br />
<br />
<table width="100%" bgcolor="#ff6666" cellspacing="0" cellpadding="5" border="1">
    <tbody>
        <tr>
            <td width="100%" valign="top" align="center" style="text-align: left; font-family: Arial; font-size: 12pt;"><strong>Document Status: For Approval</strong> </td>
        </tr>
    </tbody>
</table>
<p><strong>Approvers Only:</strong> Click on the 'Approve' check-box beside your name in the table below if you agree with the technical and user interface content of this document; not checking your 'approve' check-box signifies you do not approve.</p>
<p>%Approvals%</p>
<p>Approval Comments</p>
<p>
<table cellspacing="0" cellpadding="5" border="1" style="text-align: left; background-color: rgb(224, 255, 191); width: 100%; font-family: Arial; font-size: 12pt;">
    <tbody>
        <tr>
            <td valign="top" align="left"><strong>Approvers</strong> (mandatory participation) </td>
            <td valign="top" align="left" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-weight: bold;">%Note{Insert the names of people who will have approval authority for this review. These people, in aggregate, are responsible for approving the technical and user interface content of the document. Generally, this list should include people who represent compiler components that will need to change if this review is approved.<br />
            The I0 Process document provides detailed guidance on choosing your list of approvers.<br />
            A member of the Option Review Board must approve any i0 that adds an option or pragma.<br />
            Use Access Control to add/delete people from this list. The initial access control list is populated with the people from the Component Reviewers section below. You can use Access Control to change their role to Approver, or add additional approvers.}%<br />
            %Approvers%</td>
        </tr>
        <tr>
            <td valign="top" align="left"><strong>Release Management Contact</strong> (optional participation) </td>
            <td valign="top" align="left" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-weight: bold;">%Release_Management_Contact% <br />
            %Note{Choose the appropriate Release Managers from the BlueGroup FeatureFlow-ReleaseManagers}%<br />
            </td>
        </tr>
        <tr>
            <td valign="top" align="left"><strong>Component Reviewers</strong> (optional participation) </td>
            <td valign="top" align="left" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 255);">%Note{Each member of the BlueGroup FeatureFlow-ReleaseLeadsFocals must be made aware of the i0 review.&nbsp; Use Access Control to add/delete people from this list.}%       <br />
            %Component_Reviewers%</td>
        </tr>
        <tr>
            <td valign="top" align="left"><strong>Team Reviewers</strong> (optional participation) </td>
            <td valign="top" align="left" style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 255); font-weight: bold;">%Note{List any additional people you feel need to participate in the review. These people do not have approval authority. Use Access Control to add/delete people from this list.}%<br />
            %Team_Reviewers%</td>
        </tr>
    </tbody>
</table>
</p>
<p><br />
<br />
</p>
<p>
<table cellspacing="2" cellpadding="2" border="1" style="text-align: left; background-color: rgb(224, 255, 191); width: 100%; font-family: Arial; font-size: 12pt;">
    <tbody>
        <tr>
            <td style="font-family: Arial; vertical-align: top;"><strong>Reviewers</strong>: Please click the 'Reviewed' checkbox beside your name to indicate your participation in the review. </td>
        </tr>
    </tbody>
</table>
</p>
<p>%Reviews%<br />
</p>
<p>
<table cellspacing="2" cellpadding="2" border="1" style="text-align: left; background-color: rgb(224, 255, 191); width: 100%; font-family: Arial; font-size: 12pt;">
    <tbody>
        <tr>
            <td style="font-family: Arial; vertical-align: top;"><strong>Access Change History</strong> %Note{Authors: Access Change History will list any changes to the access control done to the document draft. These changes would not be visible in a review. In a review, this section would only list the access changes done to the review itself.<br />
            Please note that changes to the access control of a review are not automatically reflected in the access control of the draft document.}% </td>
        </tr>
    </tbody>
</table>
</p>
<p>%CollapsedSection{<strong>Access Change History</strong>}{%Access_Change_History%}%<br />
</p>
<p>
<table width="100%" bgcolor="#bfbfff" cellspacing="0" cellpadding="5" border="1">
    <tbody>
        <tr>
            <td width="100%" valign="top" align="center" style="font-family: Arial; font-size: 12pt;"><strong>Feature Overview</strong> </td>
        </tr>
    </tbody>
</table>
</p>
Fortran 2008 standard introduced DO CONCURRENT construct that individual loop iterations have no inter-dependencies. <br />
<h2>Key Requirements</h2>
Since this is a performance enhancement feature, a good performance with correct functional behavior is the key.<br />
<h2>Key Design Issues</h2>
The intention of a DO CONCURRENT construct is to allow sequential or parallel execution. However, there is an major oversight in the F2008 standard that it cannot be determined at the compile time if a variable should be privatized for each iteration. It forces the compiler to make every variables that gets defined in one or more iterations private and then compare and copy out the value at the end of each iteration if it is not supposed to be privatized in order to be F2008 standard conforming. This will significantly impact the performance.<br />
<br />
<h2>Key Design Decisions</h2>
We raised the issue to the Fortran standard committee in PL22.3 meeting #206 in Feb, 2015. We also proposed an improvement that requires syntax changes to the DO CONCURRENT construct that allows users to specify the locality of variables used in the construct. The proposal got accepted and will be presented to WG5 as a new work item for the next standard revision. As discussed with the feature team, we decided to implement the DO CONCURRENT feature with sequential execution only for 15.1.3 release and will add the parallel execution based on the proposed change once it is stabilized.<br />
<h2>Testing Strat</h2>
%Note{In this subsection, describe what is the testing approach chosen by the authors for the feature. This should be limited to a high level description of the strategy, leaving the more detailed description to the &quot;Testing Considerations&quot; section that follows in the design. }%
<p>&nbsp;The test work will be done in phases corresponding to the development plan.<br />
<br />
<strong>Phase 1:</strong><br />
<br />
<u>Functional:</u><br />
Given that the feature team is facing some delay, initially test case development will begin on gfortran.&nbsp; This will involve writing new test cases specifically for do concurrent, as well as identifying existing loop test cases (such as do, forall, omp do, etc) suitable for conversion to do concurrent loops. Once a set of test case candidates has been identified, they will be modified to use do concurrent loops.&nbsp; A key motivation behind testing will be the scope of allocatables, variables, pointers:<br />
&nbsp;&nbsp; - inside and outside the loop, or a n-level nested loop<br />
&nbsp;&nbsp; - defined and used within a single iteration<br />
&nbsp;&nbsp; - defined and not used within a single iteration<br />
&nbsp;&nbsp; - defined only once (either outside the loop or within only 1 iteration)<br />
&nbsp;&nbsp; - defined by multiple iterations<br />
&nbsp;&nbsp; - defined as shared where it is expected to be private<br />
&nbsp;&nbsp; - defined as private where it is expected to be shared<br />
<br />
Similar testing will be done for functions or subroutines used inside the loops.<br />
<br />
We will refer to this set of TCs as &quot;the seed&quot;. Once these are in place, the following will be done:</p>
<p>1. modify seed test cases to have blocks <br />
&nbsp;&nbsp;&nbsp; - inside the loops (considers block variables to be local in the loop)<br />
&nbsp;&nbsp;&nbsp; - with loops inside them (considers variables local to the block as global to the loop)<br />
&nbsp;&nbsp;&nbsp; - with loops with blocks inside them (more tricky, but same rules apply about scope)<br />
<br />
2. modify seed test cases to nest the do concurrent loops inside other loops (do, forall, etc) structures and vice versa <br />
Concurrently, development will produce a serialized implementation of do concurrent - focusing on getting code gen done as soon as possible.<br />
<br />
<u>Diagnostic:</u><br />
Write test cases covering illegal use cases where error messages are expected<br />
<br />
<strong>Phase2:</strong><br />
<br />
<u>Functional:</u><br />
Once the seed has been generated, it will be verified against the single-thread implementation.&nbsp; At this point development will work on a parallelized implementation while test case development will continue concurrently in a more agile fashion.&nbsp; The seed will be used as a basis for further testing below (which can be done concurrently):<br />
<br />
<em>Some</em> seed test cases will be modified with $omp parallel tag around the do concurrent loops to see:<br />
&nbsp;&nbsp; - with -qsmp=omp or -qsmp specified parallelization occurs (since omp)<br />
&nbsp;&nbsp; - with -qsmp=auto parallelization occurs (autopar)<br />
&nbsp;&nbsp; - with some opt levels, tobey might still autoparallelize<br />
&nbsp;&nbsp; - noopt should run sequential<br />
<br />
<br />
<u>Diagnostic:</u><br />
Update diagnostic TCs with vf files for XL Fortran</p>
<table width="100%" bgcolor="#bfbfff" cellspacing="0" cellpadding="5" border="1">
    <tbody>
        <tr>
            <td width="100%" valign="top" align="center" style="font-family: Arial; font-size: 12pt;"><strong>User Documentation</strong> </td>
        </tr>
    </tbody>
</table>
<h2>Overview</h2>
<p>Fortran 2008 standard introduced DO CONCURRENT construct that individual loop iterations have no  inter-dependencies. </p>
<h2>User Benefits</h2>
<p>It provides a means for users to program a loop construct that can be highly optimized.<br />
</p>
<h2>Public Interface</h2>
<p> <code> &gt;&gt;-------------------------DO----------------------CONCURRENT-concurrent_header-&gt;&lt;<br />
&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | |&nbsp;&nbsp; |<br />
&nbsp;&nbsp; |-DO_construct_name :-|&nbsp;&nbsp;&nbsp; |-stmt_label-| |-,-|<br />
<br />
<br />
<br />
concurrent_header is:<br />
<br />
&gt;&gt;-(--------------------------concurrent_triplet_list------------------------)-&gt;&lt;<br />
&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
&nbsp;&nbsp;&nbsp;&nbsp; |-integer_type_spec-::-|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |-, scalar_mask_expr-|<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br />
<br />
<br />
concurrent_triplet is:<br />
<br />
&gt;&gt;-index_name =--concurrent_limit : concurrent_limit-----------------------&gt;&lt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |-: concurrent_step-|<br />
<br />
<br />
concurrent_limit and concurrent_step is:<br />
<br />
&gt;&gt;-scalar_int_expr-&gt;&lt;<br />
</code> </p>
<h2>Constraints</h2>
<p>1. Any procedure referenced in the scalar_mask_expr , including one referenced by a defined operation, shall be a pure procedure (12.7).</p>
<p>2. The index-name shall be a named scalar variable of type integer.</p>
<p>3. A concurrent-limit or concurrent-step in a concurrent-triplet shall not contain a reference to any index-name in the concurrent_triplet_list in which it appears.</p>
<p>4. If the do-stmt of a do-construct specifies a do-construct-name, the corresponding end-do shall be an end-do-stmt specifying the same do-construct-name. If the do-stmt of a do-construct does not specify a do-construct-name, the corresponding end-do shall not specify a do-construct-name.<br />
</p>
<p>5. A cycle-stmt shall not appear within a CRITICAL or DO CONCURRENT construct if it belongs to an outer construct.</p>
<p>6. A RETURN statement shall not appear within a DO CONCURRENT construct.</p>
7. A branch (8.2) within a DO CONCURRENT construct shall not have a branch target that is outside the construct.
<p>8. A reference to a nonpure procedure shall not appear within a DO CONCURRENT construct.</p>
<p>9. A reference to the procedure IEEE_GET_FLAG, IEEE_SET_HALTING_MODE, or IEEE_GET_HALTING_MODE from the intrinsic module IEEE_EXCEPTIONS, shall not appear within a DO CONCURRENT construct.</p>
<p>10. An exit-stmt shall not appear within a CRITICAL or DO CONCURRENT construct if it belongs to that construct or an outer construct.</p>
<p>11. If the do-stmt is a nonlabel-do-stmt, the corresponding end-do shall be an end-do-stmt.</p>
<p>12. If the do-stmt is a label-do-stmt, the corresponding end-do shall be identied with the same label .<br />
</p>
<h2>Rules</h2>
<p>1. The execution order of the iterations is indeterminate.</p>
<p>2. The concurrent_limit and concurrent_step expressions can be evaluated in any order the same way as if they were used in the FORALL construct.</p>
<p>3. The set of combinations of index-name values is the Cartesian product of the sets defined by each triplet specification. An index-name becomes defined when this set is evaluated.</p>
<p>4. The scalar_mask_expr is evaluated for each combination of index-name values the same way as if it were used in the FORALL construct.</p>
<p>5. The set of active combinations of index-name values is the subset of all possible combinations for which the scalar_mask_expr has the value true.</p>
<p>6. The range of a DO CONCURRENT construct is executed for every active combination of the index-name values. Each execution of the range is an iteration. The executions may occur in any order.</p>
<p>7. Execution of a CYCLE statement that belongs to a DO CONCURRENT construct completes execution of that iteration of the construct. In a DO construct, a transfer of control to the end-do has the same effect as execution of a CYCLE statement belonging to that construct.<br />
</p>
<p>8. For a DO CONCURRENT construct, the loop terminates, and the DO construct becomes inactive when all of the iterations have completed execution.<br />
</p>
<p>9. More restrictions on execution of DO CONCURRENT construct.</p>
<ul>
    <li>A variable that is referenced in an iteration shall either be previously defined during that iteration, or shall not be defined or become undefined during any other iteration. A variable that is defined or becomes undefined by more than one iteration becomes undefined when the loop terminates.</li>
    <li>A pointer that is used in an iteration other than as the pointer in pointer assignment, allocation, or nullification, shall either be previously pointer associated during that iteration or shall not have its pointer association changed during any other iteration. A pointer that has its pointer association changed in more than one iteration has an association status of undefined when the construct terminates.</li>
    <li>An allocatable object that is referenced, defined, deallocated, or has its allocation status, dynamic type, or a deferred type parameter value inquired about, in an iteration, shall either be previously allocated in that iteration or shall not be allocated or deallocated in any other iteration. If an allocatable object is allocated in more than one iteration, it  shall have an allocation status of unallocated at the end of every  iteration.</li>
    <li>If data are written to a file record or position in one iteration, that record or position in that file shall not be read from or written to in a different iteration.</li>
</ul>
<p>10. The restrictions on referencing variables defined in an iteration of a DO CONCURRENT construct apply to any procedure invoked within the loop.</p>
<p>11. The name of a variable that appears as an index-name in a DO CONCURRENT construct has a scope of the construct. It is a scalar variable. <br />
</p>
<p>12. If integer_type_spec appears in concurrent_header it has the specified type and type parameters; otherwise it has the type and type parameters that it would have if it were the name of a variable in the innermost executable construct or scoping unit, and this type shall be integer type.</p>
<p>13. If integer_type_spec does not appear in a concurrent_header, an index_name shall not be the same as an accessible global identifier, local identifier, or identifier of an outer construct entity, except for a common block name or a scalar variable name. <br />
</p>
<p>14. An index_name of a contained DO CONCURRENT construct, FORALL statement, or FORALL construct shall not be the same as an index-name of any of its containing DO CONCURRENT or FORALL constructs.</p>
<p>15. When a DO CONCURRENT construct terminates, the association status of a pointer becomes undefined if the pointer&rsquo;s association status was changed in more than one iteration of the construct,</p>
<p>16. When a DO CONCURRENT construct terminates, a variable that is defined or becomes undefined during more than one iteration of the construct becomes undefined.</p>
<p>17: Processor Dependent:</p>
<ul>
    <li>the pointer association status of a pointer that has its pointer association changed in more than one iteration of a DO CONCURRENT construct, on termination of the construct;</li>
    <li>the ordering between records written by different iterations of a DO CONCURRENT construct if the records are written to a file connected for sequential access by more than one iteration;<br />
    </li>
</ul>
<h2>Language Standard Considerations</h2>
<p>DO CONCURRENT is a Fortran 2008 standard feature. We need to add a new language level message to flag the CONCURRENT keyword. </p>
<h2>Messages</h2>
All the messages are approved by the XLF Message committee.&nbsp;
<h2>Runtime and Compile Time Performance Considerations</h2>
<p>None.<br />
</p>
<h2>Multi-Platform/Portability Considerations</h2>
This feature applies to all of the supported platforms.<br />
<h2>Migration/Co-Existence/Binary-Compatibility Considerations</h2>
<p>None.</p>
<h2>Debug Considerations</h2>
<p>None.</p>
<h2>NLS (Unicode) Considerations</h2>
<p>None.</p>
<h2>Samples</h2>
<code>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; INTEGER :: k(10, 10)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DO CONCURRENT (integer :: i = 1:10, j = 1:10)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; k(j, i) = 5<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; END DO<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; END</p>
</code> <br />
<table width="100%" bgcolor="#bfbfff" cellspacing="0" cellpadding="5" border="1">
    <tbody>
        <tr>
            <td width="100%" valign="top" align="center" style="font-family: Arial; font-size: 12pt;"><strong>Architecture Review Board</strong> </td>
        </tr>
    </tbody>
</table>
<strong style="color: rgb(0, 128, 0); font-size: 20px;"></strong>
<p>None.<br />
</p>
<table width="100%" bgcolor="#bfbfff" cellspacing="0" cellpadding="5" border="1">
    <tbody>
        <tr>
            <td width="100%" valign="top" align="center" style="font-family: Arial; font-size: 12pt;"><strong>Internal Compiler Team Information</strong>       </td>
        </tr>
    </tbody>
</table>
<strong>
<h2>Product Dependencies</h2>
</strong>
<p>None.<br />
</p>
<strong>
<h2>Patent/Disclosure Implications</h2>
</strong>
<p>None.</p>
<strong>
<h2>Scientific Research and Experimental Development</h2>
</strong>
<p><strong>Technological Advancements</strong>: None.</p>
<p><strong>Technological Obstacles</strong>: None.</p>
<p><strong>Work Performed</strong>: None.</p>
<strong>
<h2>Build and Packaging Considerations</h2>
</strong> None. <strong>
<h2>Information Development Impacts</h2>
</strong>
<p>To introduce the new Fortran 2008 feature: DO CONCURRENT construct, the following topics are added or updated:</p>
<p><span style="font-weight: bold;">1. New</span> <strong>topic</strong>: Language Reference &gt; Execution control &gt; DO construct &gt; DO CONCURRENT construct <br />
</p>
<p><span style="font-weight: bold;">Description:</span><br />
Add a new topic to describe the purpose, syntax, rules, and constraints of the DO CONCURRENT construct.<br />
<strong><br />
Related information:</strong><br />
&nbsp;&nbsp;&nbsp; DO CONCURRENT statement<br />
&nbsp;&nbsp;&nbsp; CYCLE</p>
<p><strong>2.</strong> <span style="font-weight: bold;">New topic:&nbsp; </span>Language Reference &gt; Statements and attributes &gt; DO CONCURRENT <br />
</p>
<p><span style="font-weight: bold;">Description:</span><br />
Add a new topic to describe the purpose, syntax, rules, and examples of the DO CONCURRENT statement.<br />
<br />
<strong>Related information:</strong><br />
&nbsp;&nbsp;&nbsp; DO CONCURRENT construct<br />
&nbsp;&nbsp;&nbsp; CYCLE</p>
<p><strong>3.</strong> <strong>Updated topic: </strong>Language Reference &gt; Statements and attributes &gt; CYCLE</p>
<p><strong>Description:<br />
</strong></p>
<dl class="dl"><dt class="dt dlterm">Update:<span class="ph synph"><span class="ph var"><span><span name="resultofMatch" class="resultofText"><span><span name="resultofMatch" class="resultofText"></span></span></span></span></span></span></dt><dt class="dt dlterm"><span class="ph synph"><span class="ph var"><span><span name="resultofMatch" class="resultofText"><span><span name="resultofMatch" class="resultofText">DO</span></span></span><span>_<span name="resultofMatch" class="resultofText">construct</span>_name</span></span></span></span></dt><dd class="dd">is the name of a <span class="ph synph"><span class="keyword kwd"><span><span name="resultofMatch" class="resultofText"><span><span name="resultofMatch" class="resultofText">DO</span></span></span></span></span></span>, <span class="ph synph"><span class="keyword kwd"><span><span name="resultofMatch" class="resultofText"><span><span name="resultofMatch" class="resultofText">DO</span></span></span> WHILE</span></span></span><span>, or DO CONCURRENT <span name="resultofMatch" class="resultofText">construct</span></span></dd></dl>Add<strong> </strong>information for DO CONCURRENT<br />
<strong><br />
Related information:</strong><br />
New: DO DONCURRENT statement<br />
<br />
<strong>4.</strong> <strong>Updated topic:&nbsp;</strong> Language Reference &gt; Statements and attributes &gt; EXIT
<p><strong>Description:<br />
</strong></p>
In addition, it can be used to terminate execution of a specified construct that is not DO, DO WHILE, or DO CONCURRENT<br />
<strong><br />
Related information:</strong><br />
New: DO DONCURRENT statement<br />
<br />
<strong>5. Updated topic:&nbsp;</strong> Language Reference &gt; Statements and attributes &gt; END (Construct)
<p><strong>Description:<br />
</strong></p>
Add<strong> </strong>information for DO CONCURRENT<br />
<strong><br />
Related information:</strong><br />
New: DO DONCURRENT statement<br />
<br />
<strong>6. Updated topic:&nbsp;</strong> Language Reference &gt; Statements and attributes &gt; GO TO (unconditional)
<p><strong>Description:<br />
</strong></p>
The unconditional GO TO cannot be the terminal statement of a DO, DO WHILE. or DO CONCURRENT construct.<br />
<br />
<strong>7.</strong> <strong>Updated topic:&nbsp;</strong> Language Reference &gt; Statements and attributes &gt; GO TO (assigned)
<p><strong>Description:<br />
</strong></p>
The assigned GO TO cannot be the terminal statement of a DO, DO WHILE. or DO CONCURRENT construct.<br />
<br />
<br />
<strong>8. Updated topic:&nbsp;</strong> Language Reference &gt; Statements and attributes <br />
<p><strong>Description:<br />
</strong></p>
Add<strong> </strong>information for DO CONCURRENT<br />
<br />
<strong>9.</strong> <strong>Updated topic:&nbsp;</strong> Language Reference &gt; Statements and attributes &gt; IF (logical)<br />
<p><strong>Description:<br />
</strong></p>
Add<strong> </strong>information for DO CONCURRENT<br />
<br />
<strong>10. Updated topic:&nbsp; </strong>Getting Started &gt; What's new for IBM XL Fortran for AIX, V15.1.2 &gt; Fortran 2008 features<br />
<span style="font-weight: bold;">Description:</span><br />
&nbsp;             Mention DO CONCURRENT construct is a new Fortran 2008 feature.<br />
<br />
<strong>11.</strong> <strong>Do we need to update the following topics:</strong><br />
&nbsp;Language Reference &gt; Directives (IBM extension) &gt; Detailed directive descriptions &gt; NOSIMD / ASSERT /CNCALL /NEW / NOVECTOR /PERMUTATION<br />
<strong>Description:<br />
</strong>The first noncomment line (not including other directives) following the <span class="ph synph"><span class="keyword kwd">***</span></span> directive must be a <span class="ph synph"><span class="keyword kwd">DO</span></span> loop. This line cannot be an infinite <span class="ph synph"><span class="keyword kwd">DO</span></span>, <span class="ph synph"><span class="keyword kwd">DO WHILE</span></span>, or DO CONCURRENT loop. <br />
<br />
<strong>12.</strong> <strong>Do we need to update the following topic:</strong><br />
&nbsp;Language Reference &gt; Directives (IBM extension) &gt; Detailed directive descriptions &gt; LOOPID<br />
<strong>Description:<br />
</strong>You must not specify a LOOPID directive for DO constructs without control statements, DO WHILE constructs, DO CONCURRENT constructs, or an infinite DO.
<p> </p>
<strong>
<h2>Testing Considerations</h2>
</strong>
<p>%Note{ List any information here that would assist the test teams.<br />
How big is the work being done for this feature? (lots of code changed, or tricky code changed, redesign, etc.)<br />
How is a customer expected to use this functionality most often?<br />
What interactions with existing functionality may be introduced?<br />
What architectures, operating systems, debuggers, etc. need special testing?<br />
Can existing test coverage be used or adapted for this feature?<br />
etc.<br />
</p>
<p>}%</p>
<p>&nbsp;</p>
The internal implementation of do concurrent will be to use $IBM independent directives with equivalently nested loops.&nbsp; We should consider their interaction with other directives if do concurrent loops were to be used with them. <strong>
<h2>Internal or Hidden Options</h2>
</strong>
<p>None. </p>
<table width="100%" bgcolor="#bfbfff" cellspacing="0" cellpadding="5" border="1">
    <tbody>
        <tr>
            <td width="100%" valign="top" align="center" style="font-family: Arial; font-size: 12pt;"><strong>High-Level Implementation Design</strong>       </td>
        </tr>
    </tbody>
</table>
<strong>
<h2>Implementation Design Overview</h2>
</strong>As we will implement the sequential execution for DO CONCURRENT only, FFE will convert a DO CONCURRENT construct to a set of nested DO loops.&nbsp;<strong>
<h2>Inter-Component Communication/Interfaces</h2>
</strong>
<p>None. </p>
<strong>
<h2>Other Implementation Design Information</h2>
</strong>
<p>None.</p>
<table width="100%" bgcolor="#bfbfff" cellspacing="0" cellpadding="5" border="1">
    <tbody>
        <tr>
            <td width="100%" valign="top" align="center" style="font-family: Arial; font-size: 12pt;"><strong>Appendix/References</strong> </td>
        </tr>
    </tbody>
</table>
<p><br />
<br />
1. Fortran 2008 standard<br />
</p><!--HTML Wrapper--></body></html>